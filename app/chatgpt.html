<!DOCTYPE html>
<html>
<head>
  <title>Trainable AI Chatbot (Bulk Training)</title>
  <style>
    body { font-family: sans-serif; background: #f4f4f4; padding: 20px; }
    #chatbox { width: 100%; height: 300px; border: 1px solid #ccc; overflow-y: auto; padding: 10px; background: #fff; }
    textarea, input, button { padding: 10px; margin-top: 10px; width: 100%; box-sizing: border-box; }
    textarea { height: 150px; }
  </style>
</head>
<body>

  <h2>ðŸ¤– Trainable AI Chatbot</h2>
  <div id="chatbox"></div>
  <input id="userInput" type="text" placeholder="Ask something here">
  <button onclick="talk()">Send</button>

  <h3>ðŸ“š Mass Trainer</h3>
  <textarea id="bulkInput" placeholder="train:\nhello | Hi!\nhow are you | I'm fine\n..."></textarea>
  <button onclick="bulkTrain()">Train All</button>
  <button onclick="resetMemory()">ðŸ§¹ Clear Memory</button>

  <script>
    const chatbox = document.getElementById('chatbox');
    const userInput = document.getElementById('userInput');
    const bulkInput = document.getElementById('bulkInput');
    let brain = JSON.parse(localStorage.getItem('ai-brain') || '{}');

    function addToChat(text, sender) {
      const msg = document.createElement('div');
      msg.innerHTML = `<b>${sender}:</b> ${text}`;
      chatbox.appendChild(msg);
      chatbox.scrollTop = chatbox.scrollHeight;
    }

    function talk() {
      const input = userInput.value.trim();
      if (!input) return;
      addToChat(input, 'You');
      const q = input.toLowerCase();
      if (brain[q]) {
        addToChat(brain[q], 'Bot');
      } else {
        addToChat("I don't know that. Use bulk trainer below to teach me!", 'Bot');
      }
      userInput.value = '';
    }

    function bulkTrain() {
      const lines = bulkInput.value.trim().split('\n');
      let trainedCount = 0;

      for (let line of lines) {
        line = line.trim();
        if (!line || line.toLowerCase() === 'train:') continue;
        const parts = line.split('|');
        if (parts.length === 2) {
          const question = parts[0].trim().toLowerCase();
          const answer = parts[1].trim();
          brain[question] = answer;
          trainedCount++;
        }
      }

      localStorage.setItem('ai-brain', JSON.stringify(brain));
      addToChat(`âœ… Trained on ${trainedCount} items.`, 'Bot');
      bulkInput.value = '';
    }

    function resetMemory() {
      if (confirm("Are you sure you want to clear all memory?")) {
        brain = {};
        localStorage.removeItem('ai-brain');
        addToChat("ðŸ§  Memory wiped.", 'Bot');
      }
    }

    // Enter key support
    userInput.addEventListener('keypress', function(e) {
      if (e.key === 'Enter') talk();
    });
  </script>
</body>
</html>
